# 日志篇

# why log important
我们通过日志来maintain 应用的健康，集群的健康，同时可以通过日志来解决应用的各种问题，提高用户体验性能

# 日志分类
## pod && container log
container logging主要是抓取stdout && stderr，可以通过`kubect log`命令简单的查看日志

不同的容器运行时是不同的方法去处理container stdout 跟stderr streams的

## system component log
### kubelet log
kubelet的日志通常我们可以使用`journalctl`来读取systemd journal
### scheduler. controller mgr, apoiserver
这三个一般以静态pod存在

## events
events的日志在pod启动或者部署应用排查问题的时候会经常用到，比如说用户pod被gatekeeper拦截
## audit log
audit log可以通过kube-apiserver的request
# 日志格式 log format

# k8s logging tools
## Fluentd

## ELK
一般来说ELK我们都会加一个kafka, kafka能帮助我们削峰。ELK可以使用redis作为消息队列，但redis作为消息队列不是强项而且redis集群不如专业的消息发布系统kafka。
